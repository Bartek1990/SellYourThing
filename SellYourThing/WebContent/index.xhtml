<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Sell Your Thing</title>
    </h:head>

    <h:body>
        <ui:composition template="/WEB-INF/template/mainLayout.xhtml">
            <ui:define name="content">
                <!--CATEGORIES -->
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
                <div class="categoriesContainer">
                    <div class="categoriesHeader">
                        <div class="header">PRZEGLĄDAJ KATEGORIE</div>
                    </div>
                    <div id="wrapper">
                        <ul class="menu">
                            <ui:repeat value="#{categoryListBean.category}" var="singleCategory">
                                <li>
                                    <a href="#"><h:outputText value="#{singleCategory.name}"/></a>
                                    <ul>
                                        <ui:repeat value="#{singleCategory.subcategories}" var="singleSubCategory">
                                            <li><a href="#"><h:outputText value="#{singleSubCategory.subName}"/></a></li>
                                        </ui:repeat>
                                    </ul>
                                </li>
                            </ui:repeat>
                        </ul>
                    </div>
                </div>
                <script type="text/javascript">
                    $(function() {
                        var menu_ul = $('.menu > li > ul'),
                                menu_a = $('.menu > li > a');
                        menu_ul.hide();
                        menu_a.click(function(e) {
                            e.preventDefault();
                            if (!$(this).hasClass('active')) {
                                menu_a.removeClass('active');
                                menu_ul.filter(':visible').slideUp('normal');
                                $(this).addClass('active').next().stop(true, true).slideDown('normal');
                            } else {
                                $(this).removeClass('active');
                                $(this).next().stop(true, true).slideUp('normal');
                            }
                        });
                    });
                </script>
                <!-- CATEGORIES END -->

                <div class="grid-container auctionContainer">
                    <ui:repeat var="singleAuction" value="#{auctionListBean.auctionList}"  varStatus="status">
                        <h:form>
                            <h:commandLink action="#{auctionDetailsBean.details(singleAuction)}">
                                <div class="grid-25 mobile-grid-100">
                                    <section class="singleAuction">
                                        <figure class="image">
                                            <h:graphicImage value="/image/#{singleAuction.getFirstImageUrl()}"/>
                                        </figure>
                                        <div class="description">
                                            <span class="title"><h:outputText value="#{singleAuction.title}"/></span>
                                            <span class="price"><span class="currency">AKTUALNA CENA: </span> 
                                                <h:outputText value="#{singleAuction.getHigherBid()}">
                                                    <f:convertNumber minFractionDigits="2" />
                                                </h:outputText> 
                                                <span class="currency">ZŁ</span>
                                            </span>
                                            <span class="category">UBRANIA<span class="separator"> > </span>OBUWIE</span>
                                        </div>
                                    </section>
                                </div>
                            </h:commandLink>

                        </h:form>
                    </ui:repeat>		  
                </div>
            </ui:define>
        </ui:composition>
    </h:body>
</html>